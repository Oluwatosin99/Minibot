<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Requests Dashboard â€” Green Theme</title>
  <style>
    :root{
      --bg: #f6faf6;
      --card: #ffffff;
      --muted: #6b7280;
      --green: #16a34a; /* main green */
      --green-600: #13803d;
      --border: #e6f0ea;
      --accent: rgba(22,163,74,0.08);
      --radius: 12px;
      --shadow: 0 6px 18px rgba(10,10,10,0.06);
      --glass: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:#111827;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:stretch;
      min-height:100vh;
    }

    /* Layout */
    .app {
      display: grid;
      grid-template-columns: 80px 1fr;
      width: 100%;
      gap: 20px;
      padding: 20px;
      align-items:stretch;
    }

    /* Sidebar */
    .sidebar {
      background: var(--card);
      border-radius: var(--radius);
      padding: 14px 10px;
      box-shadow: var(--shadow);
      display:flex;
      flex-direction:column;
      gap:10px;
      height: calc(100vh - 40px);
      overflow:auto;
    }
    .brand {
      display:flex;
      align-items:center;
      justify-content:center;
      height:48px;
      border-radius:10px;
      font-weight:700;
      color:var(--green-600);
      font-size:14px;
      letter-spacing:0.4px;
    }
    .nav-icons{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-top:8px;
      align-items:center;
    }
    .nav-item {
      width:48px;
      height:48px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:10px;
      cursor:pointer;
      color:var(--muted);
    }
    .nav-item.active{
      background:var(--accent);
      color:var(--green-600);
      box-shadow: 0 4px 10px rgba(20,120,70,0.08);
    }
    .nav-item svg{width:20px;height:20px}

    /* Main area */
    .main {
      display:flex;
      flex-direction:column;
      gap:16px;
      height: calc(100vh - 40px);
    }

    .topbar {
      display:flex;
      gap:12px;
      align-items:center;
      background:var(--card);
      padding:14px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }
    .search {
      display:flex;
      align-items:center;
      gap:8px;
      flex:1;
      border:1px solid var(--border);
      padding:8px 12px;
      border-radius:10px;
      background:linear-gradient(180deg,#fff,#fbfffb);
    }
    .search input{
      border:0;
      outline:0;
      font-size:14px;
      width:100%;
      background:transparent;
    }
    .btn {
      padding:8px 12px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:600;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .btn-green {
      background:var(--green);
      color:white;
      box-shadow: 0 6px 14px rgba(18,120,60,0.12);
    }
    .btn-outline {
      background:transparent;
      border:1px solid var(--border);
      color:var(--muted);
    }

    /* Content */
    .content {
      background:var(--card);
      padding:14px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:auto;
      flex:1;
      display:flex;
      flex-direction:column;
    }

    /* Filters row */
    .controls {
      display:flex;
      gap:8px;
      align-items:center;
      margin-bottom:12px;
    }
    .pill {
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      font-size:13px;
      cursor:pointer;
      background:transparent;
    }
    .pill.active {
      background:var(--accent);
      color:var(--green-600);
      border-color: rgba(22,163,74,0.12);
    }

    /* Table */
    table {
      width:100%;
      border-collapse:collapse;
      table-layout:fixed;
      font-size:14px;
    }
    thead th {
      text-align:left;
      font-size:12px;
      color:var(--muted);
      padding:10px 8px;
      border-bottom:1px solid var(--border);
      white-space:nowrap;
    }
    tbody td {
      padding:12px 8px;
      border-bottom:1px dashed #f0f6ef;
      vertical-align:middle;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
    }
    .status {
      display:inline-block;
      padding:6px 8px;
      border-radius:999px;
      font-size:12px;
      font-weight:600;
      color:var(--green-600);
      background:rgba(22,163,74,0.08);
    }
    .muted {
      color:var(--muted);
      font-size:13px;
    }

    /* Modal */
    .modal-backdrop {
      position:fixed;
      inset:0;
      background:rgba(10,10,10,0.35);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:40;
    }
    .modal {
      width:460px;
      max-width:92%;
      background:var(--card);
      border-radius:12px;
      padding:18px;
      box-shadow:0 18px 40px rgba(0,0,0,0.12);
    }
    .modal h3{margin:0 0 10px 0}
    .row {display:flex; gap:10px;}
    .col {flex:1}
    .field { margin-bottom:10px; }
    .field input, .field select {
      width:100%;
      padding:9px 10px;
      border-radius:8px;
      border:1px solid var(--border);
      font-size:14px;
    }
    .modal-actions {
      display:flex;
      gap:8px;
      justify-content:flex-end;
      margin-top:6px;
    }

    /* Small screens */
    @media (max-width:880px){
      .app { grid-template-columns: 64px 1fr; padding:12px; gap:12px; }
      .sidebar { padding:10px }
      thead th, tbody td { font-size:13px }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar" aria-label="Sidebar navigation">
      <div class="brand" title="Company">X</div>

      <nav class="nav-icons" aria-label="Primary">
        <div class="nav-item active" title="Requests" data-section="requests" tabindex="0">
          <!-- list icon -->
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
            <path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/>
          </svg>
        </div>

        <div class="nav-item" title="Analytics" data-section="analytics" tabindex="0">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 3v18h18" />
            <path d="M9 14V7M15 14v-4" />
          </svg>
        </div>

        <div class="nav-item" title="Settings" data-section="settings" tabindex="0">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7z"/>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06A2 2 0 1 1 2.3 16.88l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82L4.3 3.7A2 2 0 1 1 7.12.87l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 11 1.75V1a2 2 0 1 1 4 0v.75c.2.1.39.24.56.41.17.17.31.35.41.56h.09a1.65 1.65 0 0 0 1.82-.33l.06-.06A2 2 0 1 1 22 7.88l-.06.06a1.65 1.65 0 0 0-.33 1.82V9c.1.2.24.39.41.56.17.17.35.31.56.41h.75a2 2 0 1 1 0 4h-.75c-.2.1-.39.24-.56.41-.17.17-.31.35-.41.56z"/>
          </svg>
        </div>

      </nav>

      <div style="flex:1"></div>

      <div style="text-align:center; font-size:12px; color:var(--muted); padding:10px 6px;">
        v1.0
      </div>
    </aside>

    <!-- Main -->
    <main class="main" role="main">
      <div class="topbar" aria-label="top controls">
        <div class="search" title="Search requests">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:0.6">
            <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input id="globalSearch" placeholder="Filter table" aria-label="Filter table" />
        </div>

        <button id="addRequestBtn" class="btn btn-green" title="Add Request">
          <!-- plus -->
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Add Request
        </button>

        <button id="openCompletedToggle" class="btn btn-outline" title="Toggle Open/Completed">Show: <strong id="currentViewText">Open</strong></button>
      </div>

      <section class="content" aria-label="Requests content">
        <div class="controls" role="toolbar" aria-label="Filters">
          <button class="pill active" data-filter="all">All Requests</button>
          <button class="pill" data-filter="assigned">Assigned to Me</button>
          <button class="pill" data-filter="created">Created By Me</button>
          <div style="flex:1"></div>
          <div class="muted" id="countInfo">Showing <strong id="rowCount">0</strong> requests</div>
        </div>

        <div style="overflow:auto;">
          <table id="requestsTable" aria-label="Requests table">
            <thead>
              <tr>
                <th style="width:80px">ID</th>
                <th style="width:160px">Requester</th>
                <th>Subject</th>
                <th style="width:110px">Status</th>
                <th style="width:120px">Team</th>
                <th style="width:140px">Member</th>
              </tr>
            </thead>
            <tbody>
              <!-- rows inserted dynamically -->
            </tbody>
          </table>
        </div>

      </section>
    </main>
  </div>

  <!-- Modal (hidden by default) -->
  <div id="modalRoot" style="display:none"></div>

  <script>
    // Sample starting data (static replica + interactive)
    let data = [
      {id: '66001', requester: 'Alice M.', subject: 'VPN access', status: 'Open', team: 'IT', member: 'John D.'},
      {id: '66002', requester: 'Support Bot', subject: 'Password reset', status: 'Completed', team: 'Support', member: 'N/A'},
      {id: '66003', requester: 'Michael S.', subject: 'New laptop request', status: 'Open', team: 'IT', member: 'Laura P.'},
      {id: '66004', requester: 'Finance', subject: 'Expense sheet error', status: 'Open', team: 'Finance', member: 'Emeka A.'}
    ];

    const tableBody = document.querySelector('#requestsTable tbody');
    const rowCount = document.getElementById('rowCount');
    const searchInput = document.getElementById('globalSearch');
    const addBtn = document.getElementById('addRequestBtn');
    const modalRoot = document.getElementById('modalRoot');
    const openCompletedToggle = document.getElementById('openCompletedToggle');
    const currentViewText = document.getElementById('currentViewText');

    // state
    let showCompleted = false;
    let activeFilter = 'all';

    // render table rows according to filters and search
    function renderTable() {
      const q = (searchInput.value || '').trim().toLowerCase();
      tableBody.innerHTML = '';
      let visible = 0;
      data.forEach(row => {
        // status filter
        if (!showCompleted && row.status.toLowerCase() === 'completed') return;
        // pill filters (simple examples)
        if (activeFilter === 'assigned' && !row.member.toLowerCase().includes('john') && !row.member.toLowerCase().includes('laura') && !row.member.toLowerCase().includes('emeka')) {
          // naive assigned filter demo (in real app you'd test for the current user)
          // keep most rows but hide those explicitly unassigned
        }
        // search query
        const hay = (row.id + ' ' + row.requester + ' ' + row.subject + ' ' + row.status + ' ' + row.team + ' ' + row.member).toLowerCase();
        if (q && !hay.includes(q)) return;
        visible++;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${escapeHtml(row.id)}</td>
          <td>${escapeHtml(row.requester)}</td>
          <td title="${escapeHtml(row.subject)}">${escapeHtml(row.subject)}</td>
          <td><span class="status">${escapeHtml(row.status)}</span></td>
          <td class="muted">${escapeHtml(row.team)}</td>
          <td class="muted">${escapeHtml(row.member)}</td>
        `;
        tableBody.appendChild(tr);
      });
      rowCount.textContent = visible;
    }

    // simple escape to avoid any injection in this demo
    function escapeHtml(s){ return String(s).replace(/[&<>"'`=\/]/g, function(c){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#61;'}[c];}); }

    // search input behavior (debounced)
    let debounceTimer;
    searchInput.addEventListener('input', () => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(renderTable, 180);
    });

    // Open / Completed toggle
    openCompletedToggle.addEventListener('click', () => {
      showCompleted = !showCompleted;
      currentViewText.textContent = showCompleted ? 'All (including Completed)' : 'Open';
      renderTable();
    });

    // Add Request modal
    addBtn.addEventListener('click', () => {
      showModal();
    });

    function showModal(){
      modalRoot.style.display = 'block';
      modalRoot.innerHTML = `
        <div class="modal-backdrop" role="dialog" aria-modal="true">
          <div class="modal" role="document">
            <h3>Create Request</h3>
            <div class="field"><input id="m_requester" placeholder="Requester (Full name)"/></div>
            <div class="field"><input id="m_subject" placeholder="Subject"/></div>
            <div class="row">
              <div class="col field"><select id="m_team"><option>IT</option><option>Support</option><option>Finance</option><option>Ops</option></select></div>
              <div class="col field"><input id="m_member" placeholder="Member (assignee)" /></div>
            </div>
            <div class="row">
              <div class="col field"><select id="m_status"><option>Open</option><option>Completed</option></select></div>
              <div style="flex:1"></div>
            </div>
            <div class="modal-actions">
              <button id="m_cancel" class="btn btn-outline">Cancel</button>
              <button id="m_create" class="btn btn-green">Create</button>
            </div>
          </div>
        </div>
      `;

      document.getElementById('m_cancel').addEventListener('click', closeModal);
      document.getElementById('m_create').addEventListener('click', () => {
        const requester = document.getElementById('m_requester').value.trim() || 'Anonymous';
        const subject = document.getElementById('m_subject').value.trim() || '(no subject)';
        const team = document.getElementById('m_team').value;
        const member = document.getElementById('m_member').value.trim() || 'Unassigned';
        const status = document.getElementById('m_status').value;

        // generate a simple unique-ish ID
        const maxId = data.reduce((m, r) => Math.max(m, Number(r.id) || 0), 66000);
        const newId = String(maxId + 1);

        data.unshift({ id: newId, requester, subject, status, team, member });
        closeModal();
        renderTable();
      });
    }

    function closeModal(){
      modalRoot.style.display = 'none';
      modalRoot.innerHTML = '';
    }

    // pills filter click
    document.querySelectorAll('.pill').forEach(p => {
      p.addEventListener('click', (e) => {
        document.querySelectorAll('.pill').forEach(x => x.classList.remove('active'));
        p.classList.add('active');
        activeFilter = p.dataset.filter;
        renderTable();
      });
    });

    // init render
    renderTable();

    // Accessibility: close modal with ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    // simple nav click highlight (no content change)
    document.querySelectorAll('.nav-item').forEach(el => {
      el.addEventListener('click', () => {
        document.querySelectorAll('.nav-item').forEach(x => x.classList.remove('active'));
        el.classList.add('active');
      });
    });
  </script>
</body>
</html>
